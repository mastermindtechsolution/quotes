<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="scripts/watermark.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="../lib/download.js" type="text/javascript"></script>
    <link href='http://fonts.googleapis.com/css?family=Josefin+Slab|Maven+Pro' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
</head>
<body>
  
    <div class="example" id="lower-right">

                            <input type="text" name="userName" id="userName">
                           
                            <pre>
                            <div onclick="watermarkForm()"> 
                            
                              <button type="button">Downlode</button>
                                </div>
                            </pre>
        
                        </div>  
</body>
</html>
<script>
     function watermarkForm() {
                var text = watermark.text;
                var userName = $('#userName').val();

                watermark(['img/shepherd.jpg'])
                        .image(text.lowerRight(userName, '48px Josefin Slab', '#fff', 0.5))
                        .then(function (img) {
                            // var pre = document.querySelector('#lower-right pre');
                            // pre.parentNode.insertBefore(img, pre);
                            console.log('--->>', img);
                            
                            download(img.src, userName, "image/png");
                        });

            }
   
</script>